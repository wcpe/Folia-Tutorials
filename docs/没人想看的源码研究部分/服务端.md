---
sidebar_position: 2
---

此处大部分都是服务端多线程的时候和优化了，例如服务器启动时并发登录的优化、线程检查、

一般开发来说用不到，感兴趣请自行前往[GitHub](https://github.com/PaperMC/Folia)了解

### 更新未加载区块的方块。

Level、DetectorRailBlock、PoweredRailBlock、RedStoneWireBlock、CollectingNeighborUpdater的有关方块更新都会在实现前调用`io.papermc.paper.util.TickThread.isTickThreadFor()`方法检验是否处于正确的进程上，然后进行更改。 如区块未加载则修改无效。



### ImposterProtoChunk#getBlockEntity()

添加了判断：if (!this.allowWrites && !io.papermc.paper.util.TickThread.isTickThread())

阻止了在世界生成线程中读取BlockEntity。

### 对执行不支持的API抛出UnsupportedOperationException

方法为世界生成、记分板相关。
#### org.bukkit.craftbukkit.CraftServer
```
public World createWorld(WorldCreator creator)

public boolean unloadWorld(World world, boolean save)
```

#### org.bukkit.craftbukkit.scoreboard.CraftScoreboard

```
public CraftObjective registerNewObjective(String name, Criteria criteria, net.kyori.adventure.text.Component displayName, RenderType renderType)

public Team registerNewTeam(String name)

public void clearSlot(DisplaySlot slot)
```

#### org/bukkit/craftbukkit/scoreboard/CraftScoreboardManager

```
public CraftScoreboard getNewScoreboard()

public void setPlayerBoard(CraftPlayer player, org.bukkit.scoreboard.Scoreboard bukkitScoreboard)
```